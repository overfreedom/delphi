/*!
 * uniGUI Library extension for Sencha Ext JS
 * by Farshad Mohajeri  
 * Copyright(c) 2009-2019 FMSoft Inc.
 * info@fmsoft.net
 * http://www.unigui.com
 * http://www.fmsoft.net 
!*/
var uniVars={mKeys:{},gNavigate:{},_docKeys_:{},_actFrm_:null,_mFrm_:null,_actPge_:{Id1:"",Id2:""},_maskObjs:[],_maskCnt:0,_actCnt:null,_extVer:null,_dlfrmarr:[],_dlfrmid:0,_loginFrm:null,_vport:null,_maskScrollable:false,_timers:{},},uniWhiteMask={ldMask:true,maskUseMsg:false,maskAttribs:{color:"#fff",opacity:0.3}};function _dts_(b,c){if(b&&b.getDate){if(c){var a=Ext.Date;b=a.utcToLocal(b)}return(Ext.Date.format(b,"YmdHis"))}else{return("")}}function _ts_(a){if(a&&a.getDate){return(Ext.Date.format(a,"H:i:s"))}else{return(a)}}function _xl_(a){var b=encodeURIComponent;if(a==undefined||a===null){a=""}if(a&&a.getDate){return("\3d\3"+_dts_(a))}if(typeof a=="boolean"){return("\3b\3"+b(a))}return(b(a))}function _ds_(a){if(a&&a.getDate){return(Ext.Date.format(a,"Ymd"))}else{return("")}}function _ueval(ss){eval(ss)}function hexToRGB(f,h){var d=parseInt(f.slice(1,3),16),c=parseInt(f.slice(3,5),16),a=parseInt(f.slice(5,7),16);if(h){return"rgba("+d+", "+c+", "+a+", "+h+")"}else{return"rgb("+d+", "+c+", "+a+")"}}function applyAttribs(a,b){if(a&&a.dom&&b.uniAttribs){a.dom.style.backgroundColor=hexToRGB(b.uniAttribs.color,b.uniAttribs.opacity)}}Ext.override(Ext.LoadMask,{onRender:function(){this.callParent(arguments);var a=this.maskEl;applyAttribs(a,this)}});function _pss_(c,b){if(typeof c.shiftKey=="boolean"){var a=0;if(c.shiftKey){a|=1}if(c.altKey){a|=2}if(c.ctrlKey){a|=4}return(a)}else{if(b){return _pss_(b)}}return null}function _xyLcl(a,d,c){var b=d;switch(c){case 0:b-=a.getX();break;case 1:b-=a.getY();break}return b}function _gkc_(b,a){if(b&&b.getKey){return(b.getKey())}if(a&&a.getKey){return(a.getKey())}if(a.browserEvent){return a.browserEvent.keyCode}return null}function _hdmask_(f,c){if(Ext.isObject(f)){if(!f.hasMask){return}if(f.noAutoHide&&c!==true){return}f.noAutoHide=false;if(Ext.isObject(f.activeTargetMask)){if(f.activeTargetMask.destroyed===true){return}}var b=0;if(Ext.isObject(f.UIMask)){if(f.UICnt){b=f.UICnt}if(--b<=0){f.UICnt=0;f.hasMask=false;var a=f.UIMask;if(a.mustWaitData!==true){f.maskActive=false;try{a.hide();a.destroy()}catch(d){if(uniSyncObj.debug){_log("_hdmask_: "+d.message)}}}f.UIMask=null}else{f.UICnt=b}}}}function createMask(a){return null}function _hfm_(b,a){if(b&&b.uniFMask){if(a.e&&b.uniFMask[a.e]){return true}}return false}function _shmask_(g,d,i,c){var b="Loading...";var j=null;var a=false;var h=null;if(Ext.isObject(g)){if(Ext.isObject(c)){h=c}else{if(Ext.isObject(g.uniMask)){h=g.uniMask}else{if(g.config&&Ext.isObject(g.config.uniMask)){h=g.config.uniMask}}}if(h&&(h.ldMask||d)){if(typeof h.maskMsg=="string"&&h.maskMsg!=""){b=h.maskMsg}if(!Ext.isNumber(g.UICnt)){g.UICnt=0}g.noAutoHide=i;try{if(g.UICnt++==0){if(typeof h.targetObj=="object"&&h.targetObj){j=h.targetObj}else{if(g.uwindow&&g.uwindow.hidden!==true){j=g.uwindow}else{if(g.uform){j=g.uform}}}if(j){if(j.uform==j){a=true}if(!a&&j.getMaskTarget&&!j.getMaskTarget()){a=true}}try{g.activeTargetMask=j;g.UIMask=createMask({useTargetEl:a,target:j,msg:b,uniAttribs:h.maskAttribs,useMsg:h.maskUseMsg});g.UIMask.show()}catch(f){_log("_shmask_(): "+f)}}}finally{g.hasMask=true;if(h.maskWaitData){uniVars._maskObjs.push({cf:h,c:0,u:g.UIMask})}}}}}function _ssevt_(d,c,a){if(a){d.suspendEvent(c)}else{d.resumeEvent(c)}}function _hreq_(d,a,c){if(d&&d.exEvents){var b=d.exEvents.ajaxrequest;if(b){b(d,a,c)}}}function _hcbk_(c,b){if(c&&c.exEvents){var a=c.exEvents.ajaxcallback;if(a){a(c,b)}}}function _aexc_(a){var b=a.responseText;if(b&&b.substring(0,3)=="@@@"){a.responseText=b.substring(3);return(true)}return(false)}function obj2str(i,f,d,b){var a="",h=encodeURIComponent;if(!d){d="="}if(!b){b="&"}if(Ext.isObject(i)){for(var c in i){a=a+b+h(c)+d;var g=_xl_(i[c]);if(f){a=a+Base64.encode(g)}else{a=a+g}}}if(f){a=Base64.encode(a)}return a}function ajaxRequest(g,f,d,c,b,a){return _ajaxRequest_(g,f,d,c,b,a)}function ajaxRequestNoParams(f,d,c,b,a){return _ajaxRequest_(f,d,c,b,a,true)}function _ajaxRequest_(l,a,d,f,n,k){var o="",m=encodeURIComponent,b=f;if(!l){return null}if(!l.owner){return null}if(b==undefined&&uniVars._uniAsync===false){b=false}if(Ext.isObject(d)){o=obj2str(d)}else{if(d&&d.length){var j=d.length;for(var g=0;g<j;g++){o=o+"&"+m(d[g])}}}if(l.getXType&&l.getXType()=="combo"){_asst_(l)}var h="Ajax=1&IsEvent=1&Obj="+l.nm+"&Evt="+a+o;h+=_gv_(l.uform,k);if(b!==false){b=true}var c=l.isXType&&l.isXType("window");if(n&&l.showMask&&!(!c&&l.uniMask&&l.uniMask.ldMask)){l.mevent=a;_shmask_(l,true)}return Ext.Ajax.request({url:l.owner.appRoot+"HandleEvent",event:a,params:h,success:l.owner.ajxS,failure:l.owner.ajxF,obj:l,async:b})}function _cdo_(g,c,f,b,d){if(b){if(f){if(g){if(!b[g]){b[g]={}}var a=b[g]}else{var a=b}a.owner=b;if(a[f]===undefined){a[f]=c}c.uname=f}else{if(g){c.uname=g;b[g]=c}}c.owner=b;c.uform=b.form;c.uwindow=b.window;if(b.form&&b.window&&!b.window.uform){b.window.uform=b.form;b.window.uwindow=b.window}}else{if(c){_ueval(g+"="+c.nm+";")}else{_ueval(g+"={};")}_ueval(g+'.uname="'+g+'";')}if(c){c.monitorUniEvents=true;c.retfalse={};if(c.uniAfterCreate){c.uniAfterCreate()}if(d){d(c)}}}function _coe_(b,g,h,f,d){var c="On"+f.charAt(0).toUpperCase()+f.substring(1);var a=null;if(g){if(h){a=b[g][h]}else{a=b[g]}}else{if(h){a=b[h]}else{a=b}}if(a.on){a.on(f,d)}a[c]=d}function _coxe_(a,f,g,c,b){if(f){if(g){var d=a[f][g]}else{var d=a[f]}}else{if(g){var d=a[g]}else{var d=a}}if(!d.exEvents){d.exEvents=[]}d.exEvents[c]=b}function _gv_(g,c){var a="&"+_S_ID,f="",b=encodeURIComponent;if(!c){if(g){if(g.getForm){var d=g.getForm()}else{var d=g}f=uniGetValues(d);if(f!=""){a+="&_fp_="+b(f)}}}return(a)}function _sps_(d,h,f,g,c){if(c&&c.getPosition){var a=c.getPosition();if(h!==null){h+=a[0]}if(f!==null){f+=a[1]}}if(!g&&c){var b=Ext.getViewportHeight();if(d.getHeight()+f>b){f=b-d.getHeight()-5}}if(g){if(h!==null){d.setLeft(h)}if(f!==null){d.setTop(f)}}else{_ssevt_(d,"move",true);try{if(h!==null&&f!==null){if(c){d.setLocalXY(h,f)}else{d.setPosition(h,f)}}else{if(h===null){d.setLocalY(f)}else{if(f===null){d.setLocalX(h)}}}}finally{_ssevt_(d,"move",false)}}}function _ssz_(d,a,b){if(d.getCollapsed){var f=d.getCollapsed();if(f=="left"||f=="right"){if(d.sizeLocked!==true){if(a!=d.getWidth()){d.expand(false)}}}if(f=="top"||f=="bottom"){if(d.sizeLocked!==true){if(b!=d.getHeight()){d.expand(false)}}}}d.setSize(a,b)}function setElPropHelper(k,b,f,o,j,n,l){var d=null;switch(o){case 0:case 1:case 2:case 3:case 4:case 5:if(l){var m=l.split(".");if(m.length>1){d=k[m[0]];if(d){d=d[m[1]]}}else{d=k[l]}if(Ext.isObject(d)&&d.isComponent){d=d.el}}else{if(k.getEl){d=k.getEl()}else{d=k.element}}break;case 6:if(k.getComponent){d=k.getComponent().element}break}if(d){switch(o){case 0:d.setStyle(b,f);break;case 1:d=d.down(j);if(d){d.setStyle(b,f)}break;case 2:if(d.dom){d.dom[b]=f}break;case 3:if(d.dom&&d.dom.style){d.dom.style[b]=f}break;case 4:if(k.setFieldStyle){if(f){k.setFieldStyle(b+":"+f)}else{k.setFieldStyle(b)}}break;case 5:var h=Ext.DomQuery.select(j,d.dom,null,false);if(h&&h.length){for(var g=0;g<h.length;g++){if(Ext.isObject(b)){for(var c in b){if(h[g].style){h[g].style[c]=b[c]}}}}}break;case 6:d=d.down(j);if(d){d=d.dom}if(d){d[b]=f}break}}if(!d&&n!==true){if(k.elArray==undefined){k.elArray=[]}k.elArray.push({prop:b,val:f,mtd:o,cs:j,elname:l})}}Ext.override(Ext.Widget,{setElProp:function(g,f,b,c,d,a){setElPropHelper(this,g,f,b,c,d,a)}});Ext.override(Ext.Base,{getConfig:function(){if(this.destroyed){return null}return this.callParent(arguments)},destroy:function(){var a=this.destroyed;if(!a&&this.manualDestroy===true){return}try{this.uniDestroy()}finally{try{this.callParent(arguments)}finally{if(!a){this.uniCleanup()}}}},uniCleanup:function(){try{if(this.nm){eval("delete "+this.nm+";");if(this===uniVars._actCnt){uniVars._actCnt=null}if(this===uniVars._mFrm_){uniVars._mFrm_=null}if(this===uniVars._actFrm_){uniVars._actFrm_=uniVars._mFrm_}}if(this.tabItems){this.tabItems=null}this.store=null;this.grid=null;this.uform=null;this.uwindow=null;this.owner=null}catch(e){_log(e.message)}},uniDestroy:function(){if(!this.destroyed){if(this.uform&&this.uform.tabItems){this.uform.tabItems.remove(this);if(this.uform.activeField===this){this.uform.activeField=null}}if(this.owner){if(this.rootObj){eval("delete "+this.owner.uname+";")}else{if(this.uname){this.owner[this.uname]=null}}}}}});Ext.override(Ext.Component,{destroy:function(){if(!this.destroyed&&this.manualDestroy===true){return}this.callParent(arguments)},constructor:function(a){if(a&&a.beforeinit){a.beforeinit(this,a)}this.callParent([a])},uniAfterCreate:function(){},uniCheckEvent:function(a){if(this.events[a]===true){this.uniHasEvent[a]=true}},setPendingElProps:function(){if(this.elArray){var b=this.elArray;while(b.length>0){e=b.pop();this.setElProp(e.prop,e.val,e.mtd,e.cs,true,e.elname)}}},afterRender:function(){var a=this;a.callParent();a.initUniEvents();a.setPendingElProps()},initUniEvents:function(){},showMaskCfg:function(a,b){if(!this.maskActive){this.maskActive=true;_shmask_(this,true,b,a)}},showMask:function(d,c,b){if(!this.maskActive){this.maskActive=true;var a=this.uniMask;if(!a){a=this.config.uniMask}if(!a){a={}}if(d){a.maskMsg=d;a.maskUseMsg=true}if(c){a.targetObj=c}else{if(this.uform){a.targetObj=this.uform}}_shmask_(this,true,b,a)}},hideMask:function(a){this.maskActive=false;_hdmask_(this,a)},setElProp:function(g,f,b,c,d,a){setElPropHelper(this,g,f,b,c,d,a)},setBodyProp:function(c,b){var a=this.body;if(!a){a=this.bodyElement}if(a){a.setStyle(c,b)}}});var _ajxerr=false;var _showAjaxErr=false;var _ajxflerr="Server unavailable, please try later";function AjaxError(a,b){if(_ajxerr){return}_ajxerr=true;Ext.Msg.show({title:"Ajax Error",multiline:true,value:b,width:400,minWidth:200,msg:a,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,fn:function(){_ajxerr=false}})}function parseUploadRes(a){if(a.result){return(a.result.message)}if(a.response){return(JSON.parse(a.response.responseText).message)}return("parseUploadRes(): Unknown Error.")}function AjaxSuccess(rs){if(_aexc_(rs)){return}try{eval(rs.responseText)}catch(err){if(_showAjaxErr){AjaxError(err.message,rs.responseText)}else{_log("JS Error: "+err.message)}}}function AjaxFailure(a,b){if(!uniSyncObj.fMode){AjaxError(_ajxflerr,"Error: "+a.statusText+"\x0AStatus: "+a.status)}}function _cunld_(){if(uniVars._mFrm_){ajaxRequest(uniVars._mFrm_,"bclose",[],false)}}function _pd_(a,b){var c=Ext.Date.parse(a,"YmdHis");if(b){c=Ext.Date.localToUtc(c)}return(c)}function _sdl_(g){var a=uniVars._dlfrmarr;var c=a.length;if(c>=5){var b=a[0];a.shift();try{Ext.destroy(b)}catch(f){}}var d=Ext.DomHelper.append(document.body,{tag:"iframe","class":"x-hidden",id:"__uniDlFrame_"+uniVars._dlfrmid++,name:"???????",frameBorder:0,width:0,height:0,css:"display:none;visibility:hidden;height:0px;",src:g},true);a.push(d);return d}function _clat_(){for(var a in uniVars._timers){if(uniVars._timers[a]!=null){try{uniVars._timers[a].uniStop();uniVars._timers[a]=null}catch(b){}}}}function _hed_(b){var a=_gmo_(b);if(a&&a.nm){a.uniBlurChanged=true;if(!a.sendBusy){if(!a.fieldEdited){var c=(a.isXType("datefield")||a.isXType("timefield")||a.isXType("numberfield"));if(!c){if(a.getValue&&a.getValue()===null){return}}a.fieldEdited=true;a.fieldEditBusy=true;try{if(a.readOnly!==true){if(a.uname){_sfc_(a);a.fireEvent("edited",a)}}}finally{a.fieldEditBusy=false}}}}}function _gmo_(a){if(a){if(!a.nm&&a.ownerCt&&a.ownerCt.nm){a=a.ownerCt}}return a}function _ffc_(c,a,b){if(c&&c.uform&&c.uform.uActive===false){return false}if(c&&c.focus){_sfc_(c,true);if(!a){a=false}if(!Ext.isNumber(b)){b=100}c.focus(a,b);return true}return false}function _sfc_(b,a){if((b&&!b.focusDisabled)||a){uniVars._actCnt=b}}function _rfes_(a){a.fieldEdited=false}Ext.define("uniIFrame",{getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document)},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},setUrl:function(a){this.lastUrl=a;if(this.iframe){this.iframe.src=a;this.fireEvent("urlchange",this,this.iframe)}},setValue:function(c,a){if(this.docInited){if(a===true){this.getEditorBody().innerHTML=c}else{var b=this.getDoc();b.open();b.writeln(c);b.close()}}else{this.fhtml=c;this.fhtmlOnly=a}},initEditor:function(){this.docInited=true;if(this.fhtml){this.setValue(this.fhtml,this.fhtmlOnly)}},initIFrame:function(c,b){if(this.iframe==undefined){var a=this.ifName;if(!a){a=this.config.ifName}if(a){this.iframe=document.getElementsByName(a)[0];if(this.iframe&&this.lastUrl){this.setUrl(this.lastUrl)}}}if(c&&this.lastUrl){this.fireEvent("frameload",this,b)}}});function nullVarToStr(a){if(a==undefined||a===null){return("")}return(a)}function varEqual(b,a){if(b===a){return true}if(Ext.isNumber(b)||Ext.isNumber(a)){if(b==a){return true}}if(Ext.isDate(b)||Ext.isDate(a)){if(_dts_(b)==_dts_(a)){return true}}if(nullVarToStr(b)==nullVarToStr(a)){return true}return false}function _o2s_(g,c){var d="\4",b="",a,h;if(!Ext.isObject(g)){return(_xl_(g))}for(var f in g){a=g[f];if(c){h=c[f];if(varEqual(a,h)){continue}}a=_xl_(a);if(b!=""){b+=d}b=b+f+"="+a}return"{"+b+"}"}function _r2s_(c){var b="{";if(!Ext.isObject(c)){return(_xl_(c))}if(c.data){var f=c.data;for(var d in f){if(c.isModified(d)){var a=_xl_(f[d]);if(b!="{"){b+=","}b=b+d+":"+a}}}return b+"}"}function getLicOwner(){return(Base64.decode(uniSyncObj.licOwn))}function iframe_load(a){var b=Ext.getCmp(a);if(b){b.initIFrame(true,this)}}function _rno2arr_(b){if(!Ext.isArray(b)){return("")}var a="[";Ext.Array.each(b,function(d){a+=d.data._r+","});a=a.slice(0,-1);a+="]";return(a)}function saveChartImg(i,a,f,g){if(i.chart){var c=i.chart.getImage();if(c){var b=c.data,d=c.type;if(d=="svg"){}else{if(d=="png"){ajaxRequest(i,g,{png:b})}else{_log(d+" is not supported.")}}}}}function setStoreRow(a,h,b,g,f){if(a.getCount&&a.getCount()===0){return}var d=a.getById(h);if(!d){d=a.getById(b)}if(d){d.noEvent=true;try{d.set(g);d.setId(h);d.commit()}finally{d.noEvent=false}}else{if(f){var c="";if(a.grid){c=a.grid.uname}alert("setStoreRow(): Row not found, Id: "+h+" Grid: "+c)}}}function toggleNav(d,c,a){var b=d.ownerCt;if(!b){b=d.getParent()}if(c){b.oldWidth=b.getWidth();d.setMicro(true);if(a){b.setWidth(a)}}else{d.setMicro(false);b.setWidth(b.oldWidth)}}Ext.override(Ext.data.Store,{uniApplyId:function(a,c){if(a.length==1&&Ext.isNumber(c)){var b=a[0];b.setId(c)}},uniAdd:function(a){var b=this,d=a.id;var c=b.add(a);b.uniApplyId(c,d);return c},uniInsert:function(b,a){var c=this,f=a.id;var d=c.insert(b,a);c.uniApplyId(d,f);return d}});function resizeCallback(){if(uniVars._loginFrm){ajaxRequest(uniVars._loginFrm,"uresize",{w:window.innerWidth,h:window.innerHeight})}}function addLoginResizeEvent(a){if(window.addEventListener){uniVars._loginFrm=a;window.addEventListener("resize",resizeCallback)}}function uniDelete(o){if(o){if(o.destroy){o.destroy()}else{if(o.nm){eval("delete "+o.nm+";")}}}}function _injic_(d,c,b){function a(f){var h=f.el.down(c);if(!h){h=Ext.get(c)}if(h){var g=document.createElement("img");g.src=b;h.dom.appendChild(g)}}if(d.rendered){a(d)}else{d.on("afterrender",a,d)}}function fobj2style(g,b,d,f){if(g.fc||g.ft||g.b||g.fts||g.h){var c='"';if(!f){c="style="+c}if(g.w){c+="width:"+g.w+"px;"}if(g.h){c+="height:"+g.h+"px;"}if(g.fc){c+="color:"+g.fc+";"}if(g.ft){c+="font:"+g.ft+";"}if(g.fts){c+=g.fts+";"}if(b!==true){if(g.b){c+="background-color:"+g.b+(d?" !important":"")+";"}}return(c+'"')}return null}function fobj2styleobj(fobj,nobg){if(fobj.fc||fobj.ft||fobj.b||fobj.fts||fobj.h){var a={};if(fobj.w){a.width=fobj.w+"px"}if(fobj.h){a.height=fobj.h+"px"}if(fobj.fc){a.color=fobj.fc}if(fobj.ft){a.font=fobj.ft}if(fobj.fts){try{eval("var ff={"+fobj.fts+"};")}catch(err){var ff=null}if(Ext.isObject(ff)){copyObj(ff,a)}}if(nobg!==true){if(fobj.b){a["background-color"]=fobj.b}}return(a)}return null}function copyObj(b,a){if(b&&a){for(key in b){a[key]=b[key]}}}function _rndAxis_(d,b,c,f){if(Ext.isArray(d.cLables)){var a=d.uLastIx;if(f===null){a=0}d.uLastIx=a+1;if(a<d.cLables.length){return d.cLables[a]}}if(d.hideLabel==true){return""}if(Ext.isNumber(b)){return Ext.util.Format.number(b,"#.0")}return b}Ext.override(Ext.Base,{isXType:function(b,a){return false}});if(Ext.ZIndexManager){Ext.override(Ext.ZIndexManager,{privates:{onMaskMousedown:function(a){if(uniVars._maskScrollable){return}if(this.topModal){this.topModal.focus();a.preventDefault()}}}})};