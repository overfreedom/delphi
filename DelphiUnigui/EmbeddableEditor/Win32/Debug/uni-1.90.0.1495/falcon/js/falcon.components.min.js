Ext.define("Ext.ux.plugin.BadgeText",{extend:"Ext.AbstractPlugin",alias:"plugin.badgetext",disableBg:"gray",enableBg:"red",textSize:10,textColor:"white",defaultText:"&#160;",disableOpacity:0,align:"left",text:"&#160;",radius:5,top:-5,right:-10,padding:"1px 2px",disable:!0,button:null,init:function(t){var e=this;e.button=t,e.text=e.defaultText,t.on("render",e.addBadgeEl,e),Ext.apply(t,{setBadgeText:function(a){return e.disable=void 0===a||a===e.defaultText,e.text=e.disable?e.defaultText:a,t.rendered&&(t.badgeEl.update(a.toString?a.toString():a),Ext.isStrict&&Ext.isIE8&&t.el.repaint(),e.setDisabled(e.disable)),t},getBadgeText:function(){return e.text}})},addBadgeEl:function(t){var e=this,a={position:"absolute","background-color":e.disableBg,"font-size":e.textSize+"px",color:e.textColor,padding:e.padding,index:50,top:e.top+"px",right:e.right+"px","border-radius":e.radius+"px","font-weight":"bold","text-shadow":"rgba(0, 0, 0, 0.5) 0 -0.08em 0","box-shadow":"rgba(0, 0, 0, 0.3) 0 0.1em 0.1em",cursor:"pointer"};"left"==e.align?a.left="2px":a.right="2px",t.badgeEl=Ext.DomHelper.append(t.el,{tag:"div",cls:"badgeText x-unselectable"},!0),t.badgeEl.setOpacity(e.disableOpacity),t.badgeEl.setStyle(a),t.badgeEl.update(e.text.toString?e.text.toString():e.text)},onBadgeClick:function(){var t=this;t.button.fireEvent("badgeclick",t.button,t.text)},setDisabled:function(t){var e=this;e.button.badgeEl.setStyle({"background-color":t?e.disableBg:e.enableBg,opacity:t?e.disableOpacity:1}),e.button.badgeEl.clearListeners(),t||e.button.badgeEl.on("click",e.onBadgeClick,e,{preventDefault:!0,stopEvent:!0})}});